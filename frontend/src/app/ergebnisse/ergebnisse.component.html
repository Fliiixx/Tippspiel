<div class="mb-8 flex flex-col md:flex-row md:justify-between md:items-center gap-4">
  <h1 class="text-4xl font-extrabold text-gray-800">Ergebnisse</h1>

  <div class="flex items-center gap-3">
    <label for="saison-select" class="text-sm font-medium text-gray-600">
      Season {{aktuelleSaison}}:
    </label>

    <div class="relative">
      <select
        id="saison-select"
        [(ngModel)]="aktuelleSaison"
        (change)="ladeSaison(aktuelleSaison)"
        class="appearance-none w-full md:w-auto bg-white border border-gray-300 text-gray-700 py-2 pl-3 pr-8 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
      >
        <option *ngFor="let saison of alleSaisons" [value]="saison">
          {{ getSaisonDatumsrahmen(saison) }}
        </option>
      </select>
      <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
        <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
          <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/>
        </svg>
      </div>
    </div>
  </div>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 gap-8">

  <div>
    <div *ngIf="daten.rangliste.length > 0; else keineRangliste"
         class="bg-white shadow-lg rounded-xl border border-gray-200 overflow-hidden">

      <div class="px-4 py-8 bg-gray-50 border-b border-gray-200">


          <div class="text-center">
            <h3 class="text-xl font-bold text-indigo-700">
              Gesamtrangliste
            </h3>
        </div>
      </div>

      <div class="p-6">
        <div class="max-h-105 overflow-y-auto">
          <table class="w-full text-left">
            <thead class="sticky top-0 bg-gray-50 z-10">
            <tr>
              <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Platz</th>
              <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
              <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Punkte</th>
              <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Abw.</th>
            </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
            <tr *ngFor="let spieler of daten.rangliste; let i = index"
                [class.bg-gradient-to-r]="i === 0 || i === 1 || i === 2"

                [class.from-yellow-50]="i === 0"
                [class.to-yellow-200]="i === 0"
                [class.text-yellow-900]="i === 0"
                [class.font-medium]="i === 0"

                [class.from-gray-50]="i === 1"
                [class.to-gray-200]="i === 1"
                [class.text-gray-800]="i === 1"

                [class.from-orange-50]="i === 2"
                [class.to-orange-200]="i === 2"
                [class.text-orange-800]="i === 2"
            >
              <td class="px-4 py-3 whitespace-nowrap w-16 font-semibold">{{ i + 1 }}.</td>
              <td class="px-4 py-3 whitespace-nowrap font-medium text-gray-900">{{ spieler.name }}</td>
              <td class="px-4 py-3 whitespace-nowrap text-gray-600 text-right">{{ spieler.gesamtpunkte }}</td>
              <td class="px-4 py-3 whitespace-nowrap text-gray-600 text-right">{{ spieler.gesamtabweichung | number:'1.1-1' }}</td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <ng-template #keineRangliste>
      <p class="text-gray-500 italic">Noch keine Ranglistendaten vorhanden.</p>
    </ng-template>
  </div>
  <div>
    <div *ngIf="angezeigteRunde; else keineRunden"
         class="bg-white shadow-lg rounded-xl border border-gray-200 overflow-hidden">

      <div class="p-4 bg-gray-50 border-b border-gray-200">
        <div class="flex justify-between items-center">
          <button (click)="vorherigeRunde()"
                  [disabled]="angezeigteRundeIndex <= 0"
                  class="px-4 py-2 bg-indigo-600 text-white rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50 disabled:bg-gray-300 disabled:shadow-none disabled:cursor-not-allowed transition-colors">
            &larr;
          </button>

          <div class="text-center">
            <h3 class="text-xl font-bold text-indigo-700">
              Runde {{ angezeigteRundeIndex + 1 }}
            </h3>
            <p class="text-lg font-semibold text-gray-800 mt-1">
              Gewinnzahl: {{ angezeigteRunde.gewinnzahl }}
            </p>
          </div>

          <button (click)="naechsteRunde()"
                  [disabled]="angezeigteRundeIndex >= daten.runden.length - 1"
                  class="px-4 py-2 bg-indigo-600 text-white rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50 disabled:bg-gray-300 disabled:shadow-none disabled:cursor-not-allowed transition-colors">
            &rarr;
          </button>
        </div>
      </div>

      <div class="p-6">
        <div class="max-h-105 overflow-y-auto"> <table class="w-full text-left">
          <thead class="sticky top-0 bg-gray-50 z-10">
          <tr>
            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Platz</th>
            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
            <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Tipp</th>
            <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Abw.</th>
            <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Punkte</th>
          </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
          <tr *ngFor="let tipp of angezeigteRunde.tipps"
              [ngClass]="{'bg-green-50': tipp.platz === 1}">
            <td class="px-4 py-3 whitespace-nowrap w-16 font-semibold">{{ tipp.platz }}.</td>
            <td class="px-4 py-3 whitespace-nowrap font-medium text-gray-900">{{ tipp.name }}</td>
            <td class="px-4 py-3 whitespace-nowrap text-gray-600 text-right">{{ tipp.zahl }}</td>
            <td class="px-4 py-3 whitespace-nowrap text-gray-600 text-right">{{ tipp.abweichung | number:'1.1-1' }}</td>
            <td class="px-4 py-3 whitespace-nowrap text-gray-600 text-right font-medium">{{ tipp.punkte }}</td>
          </tr>
          </tbody>
        </table>
        </div>
      </div>
    </div>

    <ng-template #keineRunden>
      <p class="text-gray-500 italic">Noch keine Runden gespielt.</p>
    </ng-template>
  </div>
</div>
